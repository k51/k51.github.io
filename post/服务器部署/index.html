<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>服务器部署 - 笔记</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="ZL" /><meta name="description" content="对小程序项目中的服务器的部署步骤进行了记录。
" /><meta name="keywords" content="笔记, 推荐系统, ZL" />






<meta name="generator" content="Hugo 0.74.3 with theme even" />


<link rel="canonical" href="https://k51.github.io/post/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.651e6917abb0239242daa570c2bec9867267bbcd83646da5a850afe573347b44.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="服务器部署" />
<meta property="og:description" content="对小程序项目中的服务器的部署步骤进行了记录。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://k51.github.io/post/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2/" />
<meta property="article:published_time" content="2020-07-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-18T00:00:00+00:00" />
<meta itemprop="name" content="服务器部署">
<meta itemprop="description" content="对小程序项目中的服务器的部署步骤进行了记录。">
<meta itemprop="datePublished" content="2020-07-18T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-07-18T00:00:00+00:00" />
<meta itemprop="wordCount" content="4587">



<meta itemprop="keywords" content="服务器," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="服务器部署"/>
<meta name="twitter:description" content="对小程序项目中的服务器的部署步骤进行了记录。"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">笔记</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">主页</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">分类</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">笔记</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">主页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">分类</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">服务器部署</h1>

      <div class="post-meta">
        <span class="post-time"> 2020-07-18 </span>
        <div class="post-category">
            <a href="/categories/%E5%85%B6%E5%AE%83/"> 其它 </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#数据库">数据库</a></li>
        <li><a href="#部署-flask--uwsgi--nginx">部署 Flask + uWSGI + Nginx</a>
          <ul>
            <li><a href="#flask">Flask</a></li>
            <li><a href="#uwsgi-和-nginx-的作用与区别">uWSGI 和 Nginx 的作用与区别</a></li>
            <li><a href="#虚拟环境">虚拟环境</a></li>
            <li><a href="#uwsgi-配置">uWSGI 配置</a></li>
            <li><a href="#nginx-配置">Nginx 配置</a></li>
            <li><a href="#设置-uwsgi-和-nginx-为系统服务">设置 uWSGI 和 Nginx 为系统服务</a></li>
          </ul>
        </li>
        <li><a href="#常用命令">常用命令</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>对小程序项目中的服务器的部署步骤进行了记录。</p>
<h2 id="数据库">数据库</h2>
<p>公司里使用的数据库为 MariaDB 5.5</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># mysql -V</span>
mysql  Ver 15.1 Distrib 5.5.65-MariaDB, <span class="k">for</span> Linux <span class="o">(</span>x86_64<span class="o">)</span> using readline 5.1
</code></pre></td></tr></table>
</div>
</div><p><strong>MariaDB</strong>是MySQL关系数据库管理系统的一个复刻，由社区开发，有商业支持，旨在继续保持在GNU GPL下开源。MariaDB的开发是由MySQL的一些原始开发者领导的，他们担心甲骨文公司收购MySQL后会有一些隐患。</p>
<p>MariaDB打算保持与MySQL的高度兼容性，确保具有库二进制奇偶校验的直接替换功能，以及与MySQL API和命令的精确匹配。</p>
<p>因此 MariaDB 可以直接使用 MySQL 对应的命令。</p>
<p>连接服务器的数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># mysql -u xxx -p</span>
</code></pre></td></tr></table>
</div>
</div><p>查看数据库中的用户信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">select Host,User,Password from mysql.user;
+-------------------------+----------+-------------------------------------------+
| Host                    | User     | Password                                  |
+-------------------------+----------+-------------------------------------------+
| localhost               | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| izbp114x5y32556id0npvrz | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| 127.0.0.1               | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| ::1                     | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| localhost               | cqstljyy |                                           |
+-------------------------+----------+-------------------------------------------+
5 rows in set (0.02 sec)
</code></pre></td></tr></table>
</div>
</div><p>发现没有打开远程连接，于是新建一个用户用于远程连接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">GRANT ALL PRIVILEGES ON *.* TO &#39;myuser&#39;@&#39;%&#39;IDENTIFIED BY &#39;mypassword&#39; WITH GRANT OPTION;
</code></pre></td></tr></table>
</div>
</div><p>再次查看用户信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">select Host,User,Password from mysql.user;
+-------------------------+----------+-------------------------------------------+
| Host                    | User     | Password                                  |
+-------------------------+----------+-------------------------------------------+
| localhost               | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| izbp114x5y32556id0npvrz | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| 127.0.0.1               | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| ::1                     | root     | *1E903C3E25D1F4AD64DE4D1AB75CAF8EBBDB9ED6 |
| localhost               | cqstljyy |                                           |
| %                       | test     | *4FF7B5B5E839857055B3A8A3C8AC6EBBB6DAE1C8 |
+-------------------------+----------+-------------------------------------------+
6 rows in set (0.00 sec)
</code></pre></td></tr></table>
</div>
</div><p>添加远程访问用户成功，刷新权限</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">FLUSH PRIVILEGES;
</code></pre></td></tr></table>
</div>
</div><p>然后就可以通过新建的用户使用远程可视化界面操纵数据库了</p>
<h2 id="部署-flask--uwsgi--nginx">部署 Flask + uWSGI + Nginx</h2>
<h3 id="flask">Flask</h3>
<p><a href="https://dormousehole.readthedocs.io/en/latest/">Flask 中文文档(1.1.1)</a></p>
<p>Flask 是一个使用 Python 编写的轻量级 Web 应用框架。在它的官方文档中，是这样结束它的“微”的：</p>
<p>“微”并不代表整个应用只能塞在一个 Python 文件内， 当然塞在单一文件内也没有问题。 “微”也不代表 Flask 功能不强。 微框架中的“微”字表示 Flask 的目标是保持核心简单而又可扩展。 Flask 不会替你做出许多决定，比如选用何种数据库。 类似的决定，如使用何种模板引擎，是非常容易改变的。 Flask 可以变成你任何想要的东西，一切恰到好处，由你做主。</p>
<p>缺省情况下， Flask 不包含数据库抽象层、表单验证或者其他已有的库可以处理的东西。 然而， Flask 通过扩展为你的应用添加这些功能，就如同这些功能是 Flask 生的一样。 大量的扩展用以支持数据库整合、表单验证、上传处理和各种开放验证等等。Flask 可能是 “微小”的，但它已经为满足您的各种生产需要做出了充足的准备。</p>
<p>在 Flask 的官方文档中推荐使用 Flask + uWSGI + Nginx 的方式来部署服务器。</p>
<h3 id="uwsgi-和-nginx-的作用与区别">uWSGI 和 Nginx 的作用与区别</h3>
<h4 id="wsgi">WSGI</h4>
<p>WSGI(Python Web Server Gateway Interface) 是为 Python 语言定义的 Web 服务器和 Web 应用程序或框架之间的一种简单而通用的接口。它封装了处理HTTP响应、TCP连接等操作的接口。用户不需要自己实现接受HTTP请求、解析HTTP请求、发送HTTP响应等操作，不需要专注于HTTP规范等，可以专心编写Web业务。</p>
<h4 id="werkzeug">werkzeug</h4>
<p>flask 自带的 WSGI 工具包，可以搭建 WSGI 服务。但只用于开发，实际生产需要用更专业高效的 Web 服务器。</p>
<h4 id="uwsgi">uWSGI</h4>
<p>uWSGI 是一个 Web 服务器，它实现了 WSGI 协议、uwsgi 协议、http 协议等。在本例中用于接收外部服务器转发的动态请求并处理后发给 web 应用程序。可以理解为 Flask 应用对象实质上是一个 WSGI 应用，而 uWSGI 则是 WSGI 应用的容器。</p>
<h4 id="uwsgi-1">uwsgi</h4>
<p>uwsgi 是一种线路协议而不是通信协议。uwsgi 协议是一个 uWSGI 服务器自有的协议，它用于定义传输信息的类型。</p>
<h4 id="nginx">Nginx</h4>
<p>高效的 Web 服务器和反向代理服务器，可以用于负载均衡。也支持 uWSGI 的 uwsgi 协议，所以可以将 Nginx 与 uWSGI 结合起来。</p>
<p>反向代理：指以代理服务器来接受 Internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从内部服务器上得到的结果返回给 Internet 上请求连接的客户端，此时代理服务器和内部服务器对外就表现为一个服务器。</p>
<p><img src="https://i.loli.net/2020/07/17/bam53cBTXrQxN9t.png" alt="小程序通信"></p>
<p>uWSGI与Nginx同是Web服务器，但是Nginx对于处理静态文件更有优势、性能更好。表现在Nginx能进行负载均衡、HTTP缓存、高效处理高并发请求等等。所以把这两者结合起来使用，能够使服务器更稳定、高效。</p>
<p>在我们的模型中：</p>
<p>Nginx 是对外的服务器，外部小程序通过 url 访问 Nginx，uWSGI 是对内的服务器，主要用来处理动态请求。</p>
<h3 id="虚拟环境">虚拟环境</h3>
<p>查看服务器的操作系统版本，为 CentOS 7.6</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># cat /etc/redhat-release</span>
CentOS Linux release 7.6.1810 <span class="o">(</span>Core<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>配 epel 源_阿里</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span>
</code></pre></td></tr></table>
</div>
</div><p>安装 python3.6.8</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># yum install python36 -y</span>
</code></pre></td></tr></table>
</div>
</div><p>验证</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># python3 --version</span>
Python 3.6.8
<span class="c1"># pip3 --version</span>
pip 9.0.3 from /usr/lib/python3.6/site-packages <span class="o">(</span>python 3.6<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>查看指向</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># ll /usr/bin/python</span>
lrwxrwxrwx <span class="m">1</span> root root <span class="m">7</span> Jul  <span class="m">2</span> 16:09 /usr/bin/python -&gt; python2

<span class="c1"># ll /usr/bin/python2*</span>
lrwxrwxrwx <span class="m">1</span> root root    <span class="m">9</span> Jul  <span class="m">2</span> 16:09 /usr/bin/python2 -&gt; python2.7
-rwxr-xr-x <span class="m">1</span> root root <span class="m">7144</span> Apr  <span class="m">2</span> 21:17 /usr/bin/python2.7

<span class="c1"># ll /usr/bin/python3*</span>
lrwxrwxrwx <span class="m">1</span> root root     <span class="m">9</span> Jul  <span class="m">2</span> 16:24 /usr/bin/python3 -&gt; python3.6
-rwxr-xr-x <span class="m">2</span> root root <span class="m">11336</span> Apr  <span class="m">2</span> 21:37 /usr/bin/python3.6
-rwxr-xr-x <span class="m">2</span> root root <span class="m">11336</span> Apr  <span class="m">2</span> 21:37 /usr/bin/python3.6m
</code></pre></td></tr></table>
</div>
</div><p>安装 python 开发工具</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># yum install python36-devel -y</span>
</code></pre></td></tr></table>
</div>
</div><p>为了防止 python 包的版本之间起冲突，需要使用虚拟环境隔离各个项目，这里选用 pipenv</p>
<p><a href="https://rgb-24bit.github.io/blog/2018/pipenv.html">Pipenv 的使用</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># pip3 install pipenv</span>
</code></pre></td></tr></table>
</div>
</div><p>安装完成后，进入 Flask 项目根目录，使用 pipenv 创建虚拟环境</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># pipenv install</span>
</code></pre></td></tr></table>
</div>
</div><p>在项目文件夹下会生成两个新的文件 Pipfile，Pipfile.lock</p>
<p>更换国内源，把pipfile里面的url改掉，换成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">&#34;https://pypi.tuna.tsinghua.edu.cn/simple&#34;
</code></pre></td></tr></table>
</div>
</div><p>激活虚拟环境</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># pipenv shell</span>
</code></pre></td></tr></table>
</div>
</div><p>之后安装项目所需要的包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># pipenv install flask</span>
<span class="c1"># pipenv install flask_sqlalchemy</span>
<span class="c1"># pipenv install sqlalchemy</span>
<span class="c1"># pipenv install pymysql</span>
</code></pre></td></tr></table>
</div>
</div><p>另外，由于 pipenv 生成的包统一会放在另一个地方，和原生的 virtualenv 直接放在项目根目录不一样，所以注意记录下虚拟环境的地址，之后在配置 uWSGI 的时候用的上，可以用 pipenv &ndash;venv 查看路径（须在创建过虚拟环境的项目文件夹中命令才会生效）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># pipenv --venv</span>
/root/.local/share/virtualenvs/ysxt-oTDbL2y1
</code></pre></td></tr></table>
</div>
</div><h3 id="uwsgi-配置">uWSGI 配置</h3>
<p><a href="https://uwsgi-docs-zh.readthedocs.io/zh_CN/latest/">uWSGI 2.0 文档</a></p>
<p>uWSGI 需要一些其他环境的支持，因此在安装 uWSGI 前要把先行条件准备好：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># yum -y install gcc  gcc-c++ zlib zlib-devel openssl openssl-devel pcre pcre-devel GeoIP gd libXpm libxslt sqlite-devel</span>
</code></pre></td></tr></table>
</div>
</div><p>安装 uWSGI</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># pip3 install uwsgi</span>
</code></pre></td></tr></table>
</div>
</div><p>装完 uWSGI，我们还要在项目根目录下创建一个 uWSGI 配置文件，直接命名为 uwsgi.ini，配置如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[uwsgi]</span>
<span class="c1"># 项目的虚拟环境</span>
<span class="na">virtualenv</span> <span class="o">=</span> <span class="s">/root/.local/share/virtualenvs/ysxt-oTDbL2y1</span>
<span class="c1"># 项目监听的端口号</span>
<span class="na">socket</span> <span class="o">=</span> <span class="s">127.0.0.1:3031</span>
<span class="c1"># 指定加载 WSGI 文件</span>
<span class="na">wsgi-file</span> <span class="o">=</span> <span class="s">testdb.py</span>
<span class="c1"># 项目的目录</span>
<span class="na">chdir</span> <span class="o">=</span> <span class="s">/srv/www/ysxt/</span>
<span class="c1"># uWSGI加载的模块中哪个变量将被调用</span>
<span class="na">callable</span> <span class="o">=</span> <span class="s">app</span>
<span class="c1"># 开启的进程数量</span>
<span class="na">processes</span> <span class="o">=</span> <span class="s">4</span>
<span class="c1"># 设置每个工作进程的线程数</span>
<span class="na">threads</span> <span class="o">=</span> <span class="s">2</span>
<span class="c1"># 用于开发阶段调试用的，1s检查一次代码有没有变动，如果有变动就重启。</span>
<span class="na">py-autoreload</span> <span class="o">=</span> <span class="s">1</span>
<span class="c1"># 当服务器退出的时候自动清理环境</span>
<span class="na">vacuum</span> <span class="o">=</span> <span class="s">true</span>
<span class="c1"># 日志文件保存位置</span>
<span class="na">logto</span> <span class="o">=</span> <span class="s">/srv/www/Test/uwsgi.log</span>
</code></pre></td></tr></table>
</div>
</div><p>注：</p>
<p>uWSGI的官方文档中给出了警告：py-autoreload 只能在开发中使用它，不要在线上环境使用。</p>
<h3 id="nginx-配置">Nginx 配置</h3>
<p><a href="https://ninghao.net/blog/2087">nginx的基本配置</a></p>
<p><a href="https://help.aliyun.com/document_detail/98728.html?spm=a2c4g.11186623.6.639.4b8f33f9eRtUWU">在Nginx服务器上安装证书</a></p>
<p>安装nginx</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># yum -y install nginx</span>
</code></pre></td></tr></table>
</div>
</div><p>在 /etc/nginx 目录下找到 nginx.conf 文件，这是 nginx 运行时的配置文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;
 
# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;
                      &#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;
                      &#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;;

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;

    server {
        listen       80 default_server;
         listen       [::]:80 default_server;
        server_name  _;
        root         /usr/share/nginx/html;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }
}

</code></pre></td></tr></table>
</div>
</div><p>注：</p>
<ul>
<li>配置中的 include /etc/nginx/conf.d/*.conf; 语句说明在 conf.d 文件夹下面的配置文件也会被读取。</li>
<li>打开 /etc/nginx ，在这个目录下面，会包含一些其它的文件， .default 结尾的文件应该是原文件的备份，比如 nginx.conf 是真正用的配置文件，nginx.conf.default 是这个文件的一个备份，如果 nginx.conf 出了问题，你可以把 nginx.conf.default 重命名为 nginx.conf 代替原来的文件。</li>
</ul>
<h4 id="http-的配置">http 的配置</h4>
<p>在 /etc/nginx/conf.d 目录下新建 项目名.conf，增加配置如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">server {
  listen 80;
  server_name 120.78.67.165; 
  location / { 
  include uwsgi_params;
  uwsgi_pass 127.0.0.1:3031;
 }  
}
</code></pre></td></tr></table>
</div>
</div><p>注：</p>
<ul>
<li>
<p>需要在云服务器上的安全策略组中开放80端口。如果还不能访问，检查操作系统上的防火墙是否关闭了端口。</p>
</li>
<li>
<p>default_server 指令可以定义默认的 server 去处理一些没有匹配到 server_name 的请求。</p>
</li>
</ul>
<h4 id="https-与-ssl-证书">HTTPS 与 SSL 证书</h4>
<p><a href="https://www.runoob.com/w3cnote/https-ssl-intro.html">HTTPS 与 SSL 证书概要</a></p>
<p>在计算机网络上，HTTPS 经由超文本传输协议（HTTP）进行通信，但利用SSL/TLS来加密数据包。</p>
<p>HTTPS 工作原理如下：</p>
<ol>
<li>浏览器将自己支持的一套加密规则发送给网站。</li>
<li>网站从中选出一组加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器。证书里面包含了网站地址，加密公钥，以及证书的颁发机构等信息。</li>
<li>浏览器获得网站证书之后浏览器要做以下工作： a) 验证证书的合法性（颁发证书的机构是否合法，证书中包含的网站地址是否与正在访问的地址一致等），如果证书受信任，则浏览器栏里面会显示一个小锁头，否则会给出证书不受信的提示。 b) 如果证书受信任，或者是用户接受了不受信的证书，浏览器会生成一串随机数的密码，并用证书中提供的公钥加密。 c) 使用约定好的HASH算法计算握手消息，并使用生成的随机数对消息进行加密，最后将之前生成的所有信息发送给网站。</li>
<li>网站接收浏览器发来的数据之后要做以下的操作： a) 使用自己的私钥将信息解密取出密码，使用密码解密浏览器发来的握手消息，并验证HASH是否与浏览器发来的一致。 b) 使用密码加密一段握手消息，发送给浏览器。</li>
<li>浏览器解密并计算握手消息的HASH，如果与服务端发来的HASH一致，此时握手过程结束，之后所有的通信数据将由之前浏览器生成的随机密码并利用对称加密算法进行加密。</li>
</ol>
<p><img src="https://i.loli.net/2020/07/18/E6n3KCxPJWgkOBL.png" alt="HTTPS通信时序图"></p>
<p>在握手过程中，网站会向浏览器发送SSL证书，SSL证书和我们日常用的身份证类似，是一个支持HTTPS网站的身份证明，SSL证书里面包含了网站的域名，证书有效期，证书的颁发机构以及用于加密传输密码的公钥等信息，由于公钥加密的密码只能被在申请证书时生成的私钥解密，因此浏览器在生成密码之前需要先核对当前访问的域名与证书上绑定的域名是否一致，同时还要对证书的颁发机构进行验证，如果验证失败浏览器会给出证书错误的提示。</p>
<h4 id="https-的配置">https 的配置</h4>
<p>小程序必须使用 HTTPS 发起网络请求，因此需要购买 https 证书</p>
<p>从云服务器上下载 https 证书，解压后得到 .pem 和 .key 文件。在 /etc/nginx/ 文件夹下新建 cert 文件夹，将 .pem 和 .key 文件上传至 /etc/nginx/cert 文件夹中</p>
<p>这里选择不在 conf.d 目录下新建配置文件，而是直接修改了 nginx.conf 配置文件，在其中增加如下的配置信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 以下属性中以ssl开头的属性代表与证书配置有关，其他属性请根据自己的需要进行配置。
server {
    listen 8081 ssl;   #SSL协议访问端口号为443。此处如未添加ssl，可能会造成Nginx无法启动。
    server_name www.cqstljyy.com;  #将localhost修改为您证书绑定的域名，例如：www.example.com。
    ssl_certificate cert/domain name.pem;   #将domain name.pem替换成您证书的文件名。
    ssl_certificate_key cert/domain name.key;   #将domain name.key替换成您证书的密钥文件名。
    ssl_session_timeout 5m;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #使用此加密套件。
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;   #使用该协议进行配置。
    ssl_prefer_server_ciphers on;   
    location / {
        include uwsgi_params;
		uwsgi_pass 127.0.0.1:3031;  
    }
}
</code></pre></td></tr></table>
</div>
</div><p>注：</p>
<p>在公司的服务器上已经存在了 apache 服务器监听了 80 和 8080 端口，因此在 Nginx 的配置中，需要将原来 http 默认配置中监听的 80 端口改为其它端口，比如8082 端口，或者干脆删除对 http 请求的监听，因为已经有 apache 服务器在对 http 请求进行监听且占用了默认的80端口，这就说明不会有 http 请求通过其它端口进行通信。</p>
<h3 id="设置-uwsgi-和-nginx-为系统服务">设置 uWSGI 和 Nginx 为系统服务</h3>
<p>将 uWSGI 和 Nginx 设置为系统服务的目的是为了：</p>
<ul>
<li>当云服务器因为某些原因重启时，自动启动 uWSGI 和 Nginx 服务器</li>
<li>当 uWSGI 和 Nginx 的进程被意外 kill 掉时，自动重启</li>
</ul>
<p>在 /usr/lib/systemd/system 中新建文件 项目名.service ，添加配置如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[Unit]
Description=uWSGI Emperor
After=syslog.target

[Service]
ExecStart=/usr/local/bin/uwsgi --ini /srv/www/Test/uwsgi.ini
RuntimeDirectory=uwsgi
Restart=always
KillSignal=SIGQUIT
Type=notify
StandardError=syslog
NotifyAccess=all

[Install]
WantedBy=multi-user.target
</code></pre></td></tr></table>
</div>
</div><p>设置 nginx 服务开机自启动，会在 /usr/lib/systemd/system 下自动生成 nginx.service 配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl enable nginx.service</span>
</code></pre></td></tr></table>
</div>
</div><p>在 nginx.service 的配置中加上</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">Restart=always
</code></pre></td></tr></table>
</div>
</div><p>设置 uWSGI 服务开机自启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl enable 项目名.service</span>
</code></pre></td></tr></table>
</div>
</div><p>重新加载：从文件系统中获取更改的配置并重新生成依赖树。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl daemon-reload</span>
</code></pre></td></tr></table>
</div>
</div><p>启动 uWSGI 服务以及查看状态</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl start 项目名.service</span>
<span class="c1"># systemctl status 项目名.service</span>
</code></pre></td></tr></table>
</div>
</div><p>启动 nginx 服务以及查看状态</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl start nginx.service</span>
<span class="c1"># systemctl status nginx.service</span>
</code></pre></td></tr></table>
</div>
</div><p>注：</p>
<p>Restart=always 的意思是服务会被无条件的重启，仅在 systemctl stop 命令或等价的操作下停止</p>
<h2 id="常用命令">常用命令</h2>
<p>启动服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl start Test.service</span>
</code></pre></td></tr></table>
</div>
</div><p>查看服务状态</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl status Test.service</span>
</code></pre></td></tr></table>
</div>
</div><p>停止服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl stop Test.service</span>
</code></pre></td></tr></table>
</div>
</div><p>开机自启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl enable Test.service</span>
</code></pre></td></tr></table>
</div>
</div><p>验证一下是否开机自启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl is-enabled Test.service</span>
</code></pre></td></tr></table>
</div>
</div><p>重新启动</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># systemctl restart Test.service</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># 通过ps，查看uwsgi相关进程</span>
<span class="c1"># ps aux|grep uwsgi</span>

<span class="c1"># kill pid会发送SIGTERM，只会导致重启，而不是结束掉。需要发送SIGINT或SIGQUIT，对应着是INT才可以</span>
<span class="c1"># killall -s INT /usr/local/bin/uwsgi</span>
</code></pre></td></tr></table>
</div>
</div><p>列出所有端口</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># netstat -ntlp</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">ZL</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2020-07-18
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">服务器</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/%E5%9C%A8-vscode-%E7%BB%88%E7%AB%AF%E4%B8%AD%E4%BD%BF%E7%94%A8-anaconda-%E7%8E%AF%E5%A2%83/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">在VSCode终端中使用Anaconda环境</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/k51" class="iconfont icon-github" title="github"></a>
  <a href="https://k51.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2020
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">ZL</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.d7b7ada643c9c1a983026e177f141f7363b4640d619caf01d8831a6718cd44ea.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
